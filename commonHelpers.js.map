{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst BASE_URL = \"https://pixabay.com/api/\";\nexport const maxItem = 15;\n\nexport const fetchResearch = (query, page) => {\n\n    try {\n    const result = axios(BASE_URL, {\n        params: {\n        key: \"44202193-f248306df09f9efdc8529d868\",\n        q: query,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: \"true\",\n        page,\n        per_page: maxItem,\n        }\n    })\n    return result;\n    } catch (err) {\n        alert(err.message)\n    }\n};","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nexport const gallery = document.querySelector(\".gallery\");\nlet lightbox;\n\n\nexport const renderGallery = (arr) => {\n  gallery.insertAdjacentHTML(\"beforeend\", markupGallery(arr));\n  if (lightbox) {\n  lightbox.refresh();\n  } else {\n  lightbox = new SimpleLightbox('.gallery a', { overlay: true, opasoverlayOpacity: 0.8, showCounter:false, captionsData: \"alt\" });\n  }\n}\n\n\nconst markupGallery = (arr) =>  {\n    return arr.map(({webformatURL, largeImageURL, tags, likes, views, comments, downloads}) => {\n        return `<li class=\"list-item\">\n        <a class=\"list-link\" href=\"${largeImageURL}\">\n          <img\n            src=\"${webformatURL}\"\n            alt=\"${tags}\"\n            class=\"list-img\"\n            width=\"360\"\n          />\n          <ul class=\"img-list\">\n            <li class=\"img-titles\">\n              <h3>Likes</h3>\n              <p>${likes}</p>\n            </li>\n            <li class=\"img-titles\">\n              <h3>Views</h3>\n              <p>${views}</p>\n            </li>\n            <li class=\"img-titles\">\n              <h3>Comments</h3>\n              <p>${comments}</p>\n            </li>\n            <li class=\"img-titles\">\n              <h3>Downloads</h3>\n              <p>${downloads}</p>\n            </li>\n          </ul>\n        </a>\n      </li>`\n}).join(\"\");\n}\n\n\nexport const iziAlert = (color, message) => {\n  iziToast.show({\n    position: \"topRight\",\n    color,\n    messageColor: \"#FAFAFB\",\n    message\n})\n}","import { fetchResearch } from \"./js/pixabay-api\";\nimport {renderGallery, gallery, iziAlert} from \"./js/render-functions\";\nimport { maxItem } from \"./js/pixabay-api\";\nlet page = 1;\n\nconst form = document.querySelector(\".form\");\nconst loader = document.querySelector(\".loader\");\nconst loadBtn = document.querySelector(\".load-btn\");\n\n\n\nloadBtn.addEventListener(\"click\", hendleLoadMore);\nform.addEventListener(\"submit\", hendleSearch);\n\nasync function hendleSearch(event) {\n    gallery.innerHTML = \"\";\n    event.preventDefault();\n    localStorage.removeItem(\"searchKey\");\n    loader.classList.remove(\"is-hiden\");\n    loadBtn.classList.add(\"is-hiden\");\n    page = 1;\n\n    const query = event.target.elements.search.value.trim();\n\n    if (!query) {\n        iziAlert(\"#EF4040\",\n            \"Please, please fill in search field\"\n        );\n    gallery.innerHTML = \"\";\n    loader.classList.add(\"is-hiden\");\n    return  \n    }\n\n    try {\n        const {data} = await fetchResearch(query, page);\n            if (data.hits.length < 1) {\n                iziAlert(\"#EF4040\",\n                  \"Sorry, there are no images matching your search query. Please try again!\"  \n                );\n            gallery.innerHTML = \"\";\n            return\n            }\n        renderGallery(data.hits);\n        \n        loadBtn.classList.remove(\"is-hiden\");\n        localStorage.setItem(\"searchKey\", query);\n\n\n    } catch (err) {\n        alert(`${err.message}`)\n    } finally {\n        loader.classList.add(\"is-hiden\");\n    }\n\n\n    event.target.reset();\n}\n\nasync function hendleLoadMore () {\n    loader.classList.remove(\"is-hiden\");\n    loadBtn.classList.add(\"is-hiden\");\n    page += 1;\n    const query = localStorage.getItem(\"searchKey\");\n    try {\n      const {data} = await fetchResearch(query, page);\n      renderGallery(data.hits);\n      loadBtn.classList.remove(\"is-hiden\");\n\n        const card = document.querySelector(\".list-item\");\n        const cardHeight = (card.getBoundingClientRect().height) * 2;\n        window.scrollBy({\n            left: 0,\n            top: cardHeight,\n            behavior: \"smooth\"\n        });\n\n      const maxPage = Math.ceil(data.totalHits / maxItem);\n        if (page === maxPage) {\n        loadBtn.classList.add(\"is-hiden\");\n        iziAlert(\"#6C8CFF\",\n            \"We're sorry, but you've reached the end of search results.\")\n        }\n    } catch (err) {\n        alert(err.message)\n    }    finally {\n        loader.classList.add(\"is-hiden\");\n    } \n}"],"names":["BASE_URL","maxItem","fetchResearch","query","page","axios","err","gallery","lightbox","renderGallery","arr","markupGallery","SimpleLightbox","webformatURL","largeImageURL","tags","likes","views","comments","downloads","iziAlert","color","message","iziToast","form","loader","loadBtn","hendleLoadMore","hendleSearch","event","data","cardHeight","maxPage"],"mappings":"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"}